# v0.2 - Layout Editor

**Date:** January 8, 2026  
**Status:** Complete

## Overview

Implemented page management, column designer, widget palette (27 types), and drag-and-drop. A subsequent UI redesign transformed the interface to a two-mode layout with floating panels.

## Components Added

### Page Management
- `PageList.tsx` - List pages with selection, add/delete/reorder
- `PageEditor.tsx` - Edit page properties (name, slug, width, etc.)
- Drag-and-drop page reordering via HTML5 drag API
- Inline page renaming

See: `frontend/src/components/PageList.tsx`, `frontend/src/components/PageEditor.tsx`

### Column Designer
- `ColumnDesigner.tsx` - Visual column layout representation
- Column size toggling (small â†” full)
- Add/remove columns with validation
- Layout validation: requires 1-2 full columns per page

See: `frontend/src/components/ColumnDesigner.tsx`

### Widget Palette
- All 27 Glance widget types with icons and descriptions
- Search filtering by name/type
- Category filtering (General, Services, etc.)
- Click to add widgets to columns

See: `frontend/src/components/WidgetPalette.tsx`, `frontend/src/widgetDefinitions.ts`

### Widget Definitions
Complete property definitions for all widget types:
- **General:** bookmarks, calendar, calendar-legacy, clock, custom-api, extension, group, html, iframe, markets, monitor, releases, rss, search, split-column, videos, weather
- **Services:** changedetectionio, docker-containers, dns-hole, immich, miniflux, repository, server-status, site-monitor, twitch-channels, twitch-top-games, hacker-news, lobsters, reddit

See: `frontend/src/widgetDefinitions.ts`

## UI Redesign (Mid-Phase)

User feedback led to a major layout transformation.

### Two-Mode Interface

**Edit Mode:**
- Full-width `LayoutEditor.tsx` component
- Visual grid-based column layout
- Widget cards with drag handles
- Column management in header

**Preview Mode:**
- Live Glance iframe preview
- Device simulation (desktop/tablet/phone)
- CSS transform scaling for responsive preview

**Floating Panels:**
- Page Settings (page properties)
- Widget Palette (widget library)
- Raw YAML (config viewer)

See: `frontend/src/components/LayoutEditor.tsx`, `frontend/src/App.tsx`

### Toolbar
- App logo and status badge
- View mode toggle (Edit/Preview)
- Device toggle (Desktop/Tablet/Phone) - shown in preview mode
- YAML button, Open Glance link

### Device Preview Scaling

| Device | Viewport | Scale Factor |
|--------|----------|--------------|
| Desktop | 1920x1080 | 100% (full width) |
| Tablet | 768x1024 | 75% |
| Phone | 375x667 | 90% |

CSS transform scaling preserves actual Glance rendering while showing approximate responsive behavior.

See: `frontend/src/components/Preview.tsx`

## Technical Decisions

### Two-Mode Interface
Separating Edit and Preview modes provides:
- More space for the layout editor
- Cleaner visual hierarchy
- Better mobile/tablet preview simulation

### Floating Panels vs Sidebar Sections
Floating panels instead of sidebar sections:
- Reduces visual clutter
- Allows full-width content area
- Panels can be dismissed easily

### Drag & Drop Implementation
Used HTML5 native drag-and-drop API (not @dnd-kit initially):
- Reorder widgets within columns
- Move widgets between columns
- Visual feedback during drag operations

Note: This was later improved with animation in v0.4.5.

## Test Coverage

- **Frontend:** 80 tests total
- **Backend:** 13 tests
- **Total:** 93 tests passing

New test files: `LayoutEditor.test.tsx` (17 tests), `PageEditor.test.tsx`, `PageList.test.tsx`, `ColumnDesigner.test.tsx`, `WidgetPalette.test.tsx`

## Superseded

- CSS styles in `frontend/src/index.css` (~800 lines added) were replaced with Tailwind in v0.4.7
- Initial floating panel design evolved into N8N-style right sidebar in v0.4.5

## Known Issues (at v0.2)

1. Widget Editor Panel not yet implemented - clicking widgets selects but no edit form
2. Widgets added via click, not drag-and-drop from palette
3. Columns cannot be reordered by dragging
4. Undo/Redo not implemented (added in v0.5)
