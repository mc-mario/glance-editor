# v0.4.7 - Tailwind CSS Migration

**Date:** January 16, 2026  
**Status:** Complete

## Overview

Full migration from ~3,200 lines of legacy CSS classes to Tailwind CSS v4 utility classes with a custom Nord-based theme.

## Motivation

The original CSS architecture had grown to ~3,200 lines with 476 CSS selectors across 40+ logical sections. This was:
- Difficult to maintain consistently
- Prone to specificity conflicts
- Hard to reason about component styling
- Required switching between JSX and CSS files

## Migration Approach

### Hybrid Strategy
Chose to keep CSS variables for theming while converting component styles to Tailwind:
- CSS variables allow runtime theme switching (important for Glance's theme system)
- Tailwind config references CSS variables for color utilities
- Complex animations remain in CSS (easier to maintain)

## Changes

### 1. Fixed Rebase Issues

Removed leftover git merge conflict markers and broken JSX:
- Conflict markers in `WidgetEditor.tsx` at `ExpandableTextEditor` component calls
- Extra closing `</div>` tags in widget editor header section

See: `frontend/src/components/WidgetEditor.tsx`

### 2. Removed Unused Code

Cleaned up TypeScript strict mode errors:
- `ThemeDesigner.tsx`: Removed unused `ChevronDown`, `ChevronRight` imports
- `ValidationPanel.tsx`: Removed unused function and duplicate interface
- `WidgetEditor.tsx`: Removed unused `DebouncedTextarea` component (80+ lines), unused `GripVertical` import

### 3. Migrated Legacy CSS Classes

Converted all legacy class patterns to Tailwind utilities:

| Legacy Pattern | Tailwind Approach |
|----------------|-------------------|
| `.form-field`, `.form-label`, `.form-group` | `flex flex-col gap-1.5`, utility classes |
| `.widget-editor-*` | `bg-bg-secondary rounded-lg shadow-xl`, etc. |
| `.panel-*`, `.floating-panel-*` | `fixed z-50 bg-bg-secondary`, etc. |
| `.btn-*` | `px-3 py-1.5 bg-accent hover:bg-accent-hover`, etc. |
| `.sidebar-*` | `w-48 bg-bg-primary border-r`, etc. |

### 4. Standardized Arbitrary Values

Replaced arbitrary CSS values with Tailwind tokens:

| Before | After |
|--------|-------|
| `p-[0.375rem_1rem]` | `py-1.5 px-4` |
| `text-[0.875rem]` | `text-sm` |
| `rounded-[0.375rem]` | `rounded-md` |
| `min-w-[80px]` | `min-w-20` |
| `w-[380px] min-w-[380px]` | `w-96 min-w-96` |
| `bg-[rgba(136,192,208,0.1)]` | `bg-accent/10` |
| `rounded-[0.5rem]` | `rounded-lg` |

### 5. Enhanced Theme Configuration

Added semantic colors to the `@theme` block for proper Tailwind utility generation.

**Problem:** Semantic colors were only in `:root` as CSS custom properties. Tailwind utilities like `bg-bg-primary` relied on CSS fallback rather than proper Tailwind definitions.

**Solution:** Dual definition in both `@theme` (for Tailwind) and `:root` (for CSS var usage):

```css
@theme {
  /* Nord Palette */
  --color-nord0: #2e3440;
  --color-nord1: #3b4252;
  /* ... nord2 through nord15 */
  
  /* Semantic Colors */
  --color-bg-primary: #2e3440;
  --color-bg-secondary: #323846;
  --color-bg-tertiary: #3d4555;
  --color-bg-elevated: #4a5264;
  --color-text-primary: #f0f4f8;
  --color-text-secondary: #c8d0dc;
  --color-text-muted: #8892a2;
  --color-accent: #8dd4e0;
  --color-accent-hover: #a8e0ea;
  --color-accent-muted: #5e81ac;
  --color-border: #4a5568;
  --color-error: #e86876;
  --color-warning: #f0d080;
  --color-success: #a8cc8c;
}
```

See: `frontend/src/index.css`

## Current State of index.css

The CSS file now contains only:

1. **Tailwind Import** - `@import "tailwindcss";`
2. **@theme Block** - Custom color definitions for Tailwind utilities
3. **:root Block** - CSS custom properties for runtime access
4. **Base Reset** - Universal box-sizing, margin, padding reset
5. **Layout Classes** - Two essential utilities:
   - `.main-container` - Flex container for main app layout
   - `.content-area` - Scrollable content area
6. **Custom Scrollbar** - `.scrollbar-thin` webkit scrollbar styles

**No component-specific CSS classes remain.**

## Styling Approach Going Forward

All component styling uses:

1. **Tailwind utility classes** - Primary styling method
2. **Theme colors** - `bg-bg-primary`, `text-text-secondary`, `border-border`, etc.
3. **Nord palette** - `bg-nord8`, `text-nord11`, etc. for direct color access
4. **Opacity modifiers** - `bg-accent/10`, `text-error/50`, etc.

### Common Patterns

**Buttons:**
```tsx
// Primary
<button className="px-3 py-1.5 bg-accent text-bg-primary hover:bg-accent-hover rounded-md text-sm font-medium transition-colors">

// Secondary
<button className="px-3 py-1.5 bg-bg-tertiary text-text-secondary hover:bg-bg-elevated rounded-md text-sm font-medium transition-colors border border-border">

// Danger
<button className="px-3 py-1.5 bg-error/10 text-error hover:bg-error/20 rounded-md text-sm font-medium transition-colors">
```

**Form Inputs:**
```tsx
<input className="w-full p-2 px-3 bg-bg-primary border border-border rounded-md text-sm transition-colors focus:outline-none focus:border-accent placeholder:text-text-muted" />
```

**Panels:**
```tsx
<div className="bg-bg-secondary border border-border rounded-lg shadow-xl">
```

## Files Changed

| File | Changes |
|------|---------|
| `frontend/src/index.css` | Removed ~3,000 lines, added Tailwind theme config |
| `frontend/src/App.tsx` | Converted all classes to Tailwind utilities |
| `frontend/src/components/WidgetEditor.tsx` | Removed conflicts, migrated all classes |
| `frontend/src/components/LayoutEditor.tsx` | Standardized values |
| `frontend/src/components/ThemeDesigner.tsx` | Removed unused imports |
| `frontend/src/components/ValidationPanel.tsx` | Removed unused code |
| All other components | Converted to Tailwind utilities |

## Build Status

```
> tsc && vite build

vite v5.4.21 building for production...
✓ 5102 modules transformed.
dist/assets/index.css   39.88 kB │ gzip: 7.50 kB
dist/assets/index.js    300.50 kB │ gzip: 84.01 kB
✓ built in 8.72s
```

All TypeScript errors resolved. Build completes successfully.

## Documentation

Styling conventions documented in `docs/PROJECT_OVERVIEW.md` under "Styling Guide" section.
